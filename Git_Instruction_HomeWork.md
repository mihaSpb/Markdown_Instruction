![Logo GIT](Git-Logo-1788C.png)
# Работа с Git
## 1. Проверка наличия установки Git
В терминале выполнить команду `git version`

Если Git установлен, появиться сообщение с информацией о версии програмы. Иначе будет сообщение об ошибке.

## 2. Установка Git
Загружаем последнюю версию Git с сайта https://git-scm.com/downloads

Устанавливаем с настройками по умолчанию.

## 3. Настройка Git
При первом использовании Git необходимо представиться. Для этого необходимо выполнить в терминале две команды:

```
git config --global user.name «Ваше имя английскими буквами» 
git config --global user.email ваша почта@example.com
```

## 4. Инициализация репозитория Git
Использована цитата с этого ресурса: https://www.atlassian.com/ru/git/tutorials/setting-up-a-repository
> Для создания нового репозитория используется команда git init. Команду `git init` выполняют только один раз для первоначальной настройки нового репозитория. Выполнение команды приведет к созданию нового подкаталога .git в вашем рабочем каталоге. Кроме того, будет создана новая главная ветка.

## 5. Запись изменений в репозиторий Git 
Для получения списка проиндексированных файлов, а так же списка не отслеживаемых файлов, а также удаленных из индекса, применияется команда `git status`

Если в репозитории есть файлы, которые не отслеживаются, то их необходимо добавить в индекс репозитория.

#### Команда git add
Команда `git add` используется для добавления файлов из рабочего каталога в раздел проиндексированных файлов. Она сообщает Git, что вы хотите включить изменения в конкретном файле в следующий коммит.

>Если хотим добавить все файлы проекта в наш будущий комминт, то вводим `git add .` или  `git add --all`

>Если хотим добавить конкретный файл, то используем следующий формат команды `git add <Имя файла>` (начав вводить имя файла, на третьем-четвертом символе можно нажать клавишу TAB и система подхватит файл, с соответвующим именем).

При необходимости, можно сбросить весь индекс или удалить из него изменения определенного файла. Для этого используются следующие команды:
* `git reset` - сбрасывает весь индекс.

* `git reset <Имя файла>` — удаляет из индекса конкретный файл.

#### Команда git commit
Для регистрации сделанных изменений, в отслеживаемых файлай, существует команда `git commit`

* Команда `git commit -a` — совершит коммит, автоматически индексируя изменения в файлах проекта. Новые файлы, при этом, индексироваться не будут! Удаление же файлов будет учтено.

* Команда `git commit -m «commit comment»` — добавит комментарий прямо из командной строки вместо текстового редактора.

* Команда `git commit -am «commit comment»` - совершит коммит и добавляет комментарий.

* Команда `git commit <Имя файла>` — внесет в индекс и создаст коммит на основе изменений единственного файла.

#### Команда git diff
Команда `git diff`показывает изменения между файлами в проекте еще не в несенные в индекс.

* Команда `git diff --cached` — покажет изменения, внесенные в индекс.
* Команда `git diff HEAD` — покажет изменения в проекте по сравнению с последним коммитом.

* Команда `git diff HEAD^` — то же, только сравнение будет с предпоследним коммитом.

## 6. Просмотр истории коммитов Git 

Для просмотра истории коммитов используется команда `git log`. После ее выполнения в терминале появиться список всех зарегестрированных коммитов. 

Для вывода в терминал сокращенного списка зарегестрированных коммитов, используется команда `git log --oneline`.

> В конце списка коммитов, если их много, появиться слово (END) - необходимо нажать на клавишу "Q" для выхода из списка.


## 7. Перемещение между коммитами Git
Команда `git checkout` позволяет переключаться между последними коммитами. 

* Для перемещения с определенному коммиту необходимо ввести команду `git checkout` в следующем формате: `git checkout <hesh>`, где `<hesh>` это хешкод требуемого коммита.

* Хешкод удобнее всего получить в сокращенном скписке коммитов, после выполнения команды `git log --oneline`.
 
 > Важно! После перемещения по разным коммитам, необходимо вернуться в актуальное состояние последнего коммита, используя команду `git checkout master`

## 8. Добавление изображений в Git и создание файла .gitignore
Чтобы вставить изображение в текст, достаточно написать следующее: 
>![Здесь будет текст, который показывается если загрузка файла не удалась](Здесь должен быть указан путь к файлу изображения: в локальном репо - на файле изображения, правой кнопкой, а затем выбрать пункт меню __"Скопировать относительный путь"__)

Для исключения из отслеживания файлы или папки, необходимо добавить в папку репозитория файл **.gitignore**

В данный файл записать шаблоны игнорируемых файлов (__*.png__) или имена файлов или имена папок (__/temp__).

 ## 9. Создание веток в Git

 ### *__Делай ветки сразу, делай ветки часто!__*
### Первый способ создание веток в Git
 Ветка в Git - это простой перемещаемый указатель на один из коммитов, обычно последний в цепочке коммитов. По умолчанию имя основной ветки в Git - __master__.
 
 Создать новую ветку можно командой `git branch <имя новой ветки>`
 И будет создан новый указатель на текущий коммит.

 Список веток в репозитории можно посмотреть с помощью команды `git branch`

 Текущая, активная ветка будет отмечена звездочкой: __*master__

 ### Второй способ добавления веток в Git
 Еще можно создавать новые ветки в Git, используя команду `git checkout -b <имя новой ветке>`. Ключ `-b` создает новую ветку. 


 ### Третий способ добавления веток в Git
Начиная с версии Git 2.23 появилась возможность добавлять новые ветки, используя команду `git switch --create <имя новой ветки>` 
После ввода данной команды, будет создана новая ветка и она сразу станет активной.

Команда `git switch <имя ветки>` делает активной выбранную ветку.

## 10. Слияние веток и разрешение конфликтов в Git
Для слиянии ветки с текущей, нужно выполнить команду `git merge <имя выбранной ветки>`

Если была изменена одна и та же часть файла в обеих ветках, то возникнет конфликт, который потребует участие пользователя.
VSC предлагает варианты разрешения конфликта: 
* Оставить текущий вариант (__Accept Current Change__) - входящая информация не добавиться.
* Добавить входящий вариант (__Accept Incoming Change__) - текущая информация будет заменена входящей.
* Оставить оба варианта (__Accept Both Change__) - к существующей информации добавиться входящая, сразу после имеющейся.
* Сравнить обе версии (__Compare Changes__)- текущая версия и добавляемая откроются в разных окнах для сравнения изменений.

>Важно! После разрешения конфликта необходимо обязательно сделать коммит слияния.

#### Добавление созданной ветки в удаленный репозиторий.
После создания новой ветки в локальном репозитории, необходимо сделать локальный комминт. После этого запушить эти изменения в удаленный репозитоий.

Для этого используется комада `git push --set-upstream <origin - связанный репозиторий> <имя добавленной ветки>`
После этого, в GitHub принять эти изменеия, нажав кнопку `Confirm pull request` и далее согласиться со слиянием.

## 11. Удаление веток в Git
### Удаление ветки в локальном репозитории Git
Для удаления ветки в локальном репозитории, используется команда `git branch -d <имя ветки>`

>Важно! Обратите внимание на то, что ветка, которую вы удаляете, не должна быть вашей текущей веткой, в которой вы работаете, иначе отобразится ошибка вида: `error: Cannot delete branch <имя ветки> checked out at <path/to>`

Поэтому, если вам нужно удалить текущую ветку, то сначала нужно переключиться на какую-либо другую ветку, а только потом выполнять удаление.

Возникновение ошибки `error: The branch <имя ветки> is not fully merged. If you are sure you want to delete it` говорит о том, что не было произведено __слияние__ удаляемой ветки. Либо нужно выполнить команду `git merge <имя ветки>` для ее слияния либо, если вы по прежнему хотите удалить ветку, то для принудительного удаления ветки можно воспользоваться следующей командой:
`git branch -D <имя ветки>`

>Обратите внимание, что в этой команде используется ключ `-D`, написанный с большой буквы.


#### Восстановление удаленной ветки в локальном репозитории Git
Если появилась необходимость удаленную ветку, то необходимо выполнить следующие шаги:

* Выполнить команду `git reflog --no-abbrev` - в логе нужно найти `<hesh>` хешкод удаленной ветки и скопировать или записать его.
* Если вы только что удалили ветку, то в терминале появиться запись, похожая на эту: `Deleted branch <имя ветки> (was <hesh>)`
* Далее, для восстановления, выполните команду `git checkout -b <имя ветки> <hash>`. После этого ветка восстановится на том коммите, хешкод, которого был указан и станет активной.

### Удаление ветки в удаленном репозитории Git

## 12. Работа с удаленным репозиторием GitHub
Для создания новой папки внутри удаленного репозитория можно воспользоваться фукционалом сервиса GitHub. 

- Задаем имя нового репозитория.
- Выбираем параметр `public` - в таком случае доступ к репозиторию будут иметь все, у кого есть ссылка на него. `privet` - ограничивает доступ к репозиторию.

>При необходимости можно сразу создать файлы `.gitignore` и `README.md`

- Нажать кнопку `Create repository` для создания нового репозитория.

После создания нового репозитория (при отсутствии связанного локального репозитория), GitHub предлагает выполнить следующие команды:

- `echo "# study_folder" >> README.md` - создание файла `README.md` в локальном репозитории. Где `"# study_folder"` - заголовок первого уровня, который будет добавлен в файл при его создании.
- `git init` - инициализация локального репозитория.
- `git add README.md` - добавить в индекс файл `README.md`
- `git commit -m "first commit"` - зафиксировать сделанные изменения, добавив коммит.
- `git branch -M main` - переименовать текущую ветку локального репозитория в  `main` (в GitHub основная ветка называется `main`, когда как в Git она называется `master`).

> Флаг `-M` позволяет переимоновывать текущую ветку.

- `git remote add origin https://github.com/mihaSpb/study_folder.git` - связывание локального репозитория с удаленным.

> Команда `git remote -v` показывает связанность с удаленным репозиторием (по умолчанию он указывается, как `origin`, но при связывании это название можно изменить). Ключ `-v` показывает адреса связывания.

- `git push -u origin main` - отправка локальных изменений в удаленный репозиторий и связывание двух веток - ветку на локальном репозитории с веткой на удаленном репозитории. Эта команда делается один раз, далее применяется команда `git push` для отправки изменений.

## 13. Работа с чужим репозиторием GitHub
### Клонирование репозитория
Для клонирования другого открытого репозитория, копируем ссылку на него и в новой локальной папке выполняем команду `git clone <https://github.com/AndreyBulgakov19/Telegram.Bot.git> <опционально - можно задать новое имя репозитория, отличное от оригинального>`

### Совместная работа с удаленным репозиторием через Fork репозитория
Для совместной работы с чужим удаленным репозиторием необходимо сделать форк этого репозитория. Для этого на GitHub, находясь в этом репозитории нажимаем кнопку `Fork`, в правом верхнем углу.

Далее можно поменять имя для своей копии и записать описание, после чего нажать кнопку `Create fork`

В вашем аккаунте GitHub появиться форк этого репозитория, с которым уже в дальнейшем и нужно работать.

Затем копируем ссылку на этот репозиторий из своего аккаунта GitHub и в локальной папке выполняем команду `git clone <ссылка на удаленный репозиторий>`

> Внимание! Все дальнейшие изменения в клонированном чужом удаленном репозитории делать можно __только в новой ветке__! И никак иначе.
> Первым делом - добавляем новую ветку, и только потом делаем первые изменения!

Добавляем изменения в локальном репозитории, добавляем коммиты и отправляем их в свой удаленный репозиторий через команду `git push --set-upstream origin <имя новой добавленной ветки>` 

В случае, если в удаленном репозитории не появилась кнопка `Compare pull request`, то идем в раздел `Pull requests` и там нажимаем кнопку `New pull request`

Далее, нужно выбрать вновь добавленную ветку в выпадающем списке `compare <имя ветки>` в правой части экрана.

И если нет ошибок, то нажимаем кнопку `Create pull request`, далее можно добавить комментарии и данные отправятся автору.

Автор либо принимает изменения, либо отправляет свои комментарии.